<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ルートGPX生成</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h2>ルートをGPXで保存（OpenRouteService使用）</h2>

  <p>
    このサイトでは、<strong>OpenRouteService</strong> のAPIを使って、<strong>徒歩・自転車・車の道なりルート</strong>を取得し、<strong>GPXファイルとして保存</strong>できます。<br>
    以下のサイトから<strong>APIキーを取得</strong>し、貼り付けてください（1日あたり<strong>2000回まで無料</strong>で利用できます）：<br>
    🔑 <a href="https://account.heigit.org/manage/key" target="_blank">https://account.heigit.org/manage/key</a>
  </p>

  <div class="controls">
    <label>🔑 APIキー: 
      <input id="apiKey" type="text" size="40" placeholder="OpenRouteService APIキーを入力" />
      <button onclick="saveApiKey()">💾 保存</button>
      <button onclick="clearApiKey()">❌ 削除</button>
    </label>
    <label>🚗 モード: 
      <select id="mode">
        <option value="foot-walking">徒歩</option>
        <option value="cycling-regular">自転車</option>
        <option value="driving-car">車</option>
      </select>
    </label>
    <label>📄 ファイル名: 
      <input id="filename" type="text" placeholder="例: my-route" size="20" />
    </label>
    <label>📍 出発点: 
      <input id="startCoord" type="text" placeholder="緯度,経度 例: 35.6,139.7" size="30" oninput="updateMarkerFromInput('start')" />
    </label>
    <label>🏁 到着点: 
      <input id="endCoord" type="text" placeholder="緯度,経度 例: 35.7,139.8" size="30" oninput="updateMarkerFromInput('end')" />
    </label>
    <button onclick="useCurrentLocation()">現在地を出発点に</button>
    <button onclick="resetMap()">リセット</button>
    <button onclick="downloadGPX()">GPXとして保存</button>
    <div id="distanceDisplay"></div>
  </div>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
